<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Material</title>

  <link rel="stylesheet" href="../style.css">

  <style>
    body {
      padding: 25px;
      font-family: "Inter", sans-serif;
      background: #ffffff;
      color: #1a1a1a;
      line-height: 1.6;
    }

    h1 {
      font-size: 26px;
      font-weight: 800;
      margin-bottom: 20px;
      text-align: left;
    }

    .content {
      white-space: pre-line;
      font-size: 17px;
      background: #f7f7f7;
      padding: 20px;
      border-radius: 12px;
    }

    .locked-banner {
      background: #ff3b30;
      color: white;
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 20px;
      text-align: center;
      font-size: 16px;
      font-weight: 600;
    }

    .btn {
      margin-top: 25px;
      width: 100%;
    }
  </style>
</head>

<body>

  <h1 id="titulo">Carregando...</h1>

  <div id="alertaPremium" class="locked-banner" style="display:none;">
    ðŸ”’ Este material Ã© Premium. Desbloqueie para acessar.
  </div>

  <div id="conteudo" class="content"></div>

  <button onclick="goTo('biblioteca')" class="btn-voltar">Voltar</button>

  <script type="module">
    import { loadDB } from "../database.js";
    import { goTo } from "../navigation.js";

    window.goTo = goTo;

    const db = loadDB();
    const id = db.materialAtual;

    const lista = db.library || [];
    const material = lista.find(m => m.id === id);

    const titulo = document.getElementById("titulo");
    const conteudo = document.getElementById("conteudo");
    const alerta = document.getElementById("alertaPremium");

    if (!material) {
      titulo.textContent = "ConteÃºdo nÃ£o encontrado.";
      conteudo.textContent = "";
    } else {
      titulo.textContent = material.titulo;

      if (material.premium && !db.premium) {
        // bloqueado
        alerta.style.display = "block";
        conteudo.textContent = "";
      } else {
        // liberado
        conteudo.textContent = material.texto || "ConteÃºdo vazio.";
      }
    }
  </script>

</body>

</html>
